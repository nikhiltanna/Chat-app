{"ast":null,"code":"import _toConsumableArray from\"C:/Users/acer/Desktop/Chat app/chat-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/acer/Desktop/Chat app/chat-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{user}from\"../Join/Join\";import socketIo from\"socket.io-client\";import\"./Chat.css\";import sendLogo from\"../../images/send.png\";import Message from\"../Message/Message\";import ReactScrollToBottom from\"react-scroll-to-bottom\";import closeIcon from\"../../images/closeIcon.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var socket;var ENDPOINT=\"http://localhost:5000/\";var Chat=function Chat(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),id=_useState2[0],setid=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];var send=function send(){var message=document.getElementById('chatInput').value;socket.emit('message',{message:message,id:id});document.getElementById('chatInput').value=\"\";};console.log(messages);useEffect(function(){socket=socketIo(ENDPOINT,{transports:['websocket']});socket.on('connect',function(){alert('Connected');setid(socket.id);});console.log(socket);socket.emit('joined',{user:user});socket.on('welcome',function(data){setMessages([].concat(_toConsumableArray(messages),[data]));console.log(data.user,data.message);});socket.on('userJoined',function(data){setMessages([].concat(_toConsumableArray(messages),[data]));console.log(data.user,data.message);});socket.on('leave',function(data){setMessages([].concat(_toConsumableArray(messages),[data]));console.log(data.user,data.message);});return function(){socket.emit('disconnect');socket.off();};},[]);useEffect(function(){socket.on('sendMessage',function(data){setMessages([].concat(_toConsumableArray(messages),[data]));console.log(data.user,data.message,data.id);});return function(){socket.off();};},[messages]);return/*#__PURE__*/_jsx(\"div\",{className:\"chatPage\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chatContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"C CHAT\"}),/*#__PURE__*/_jsxs(\"a\",{href:\"/\",children:[\" \",/*#__PURE__*/_jsx(\"img\",{src:closeIcon,alt:\"Close\"})]})]}),/*#__PURE__*/_jsx(ReactScrollToBottom,{className:\"chatBox\",children:messages.map(function(item,i){return/*#__PURE__*/_jsx(Message,{user:item.id===id?'':item.user,message:item.message,classs:item.id===id?'right':'left'});})}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputBox\",children:[/*#__PURE__*/_jsx(\"input\",{onKeyPress:function onKeyPress(event){return event.key==='Enter'?send():null;},type:\"text\",id:\"chatInput\"}),/*#__PURE__*/_jsx(\"button\",{onClick:send,className:\"sendBtn\",children:/*#__PURE__*/_jsx(\"img\",{src:sendLogo,alt:\"Send\"})})]})]})});};export default Chat;","map":{"version":3,"names":["React","useEffect","useState","user","socketIo","sendLogo","Message","ReactScrollToBottom","closeIcon","socket","ENDPOINT","Chat","id","setid","messages","setMessages","send","message","document","getElementById","value","emit","console","log","transports","on","alert","data","off","map","item","i","event","key"],"sources":["C:/Users/acer/Desktop/Chat app/chat-app/src/component/Chat/Chat.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { user } from \"../Join/Join\";\r\nimport socketIo from \"socket.io-client\";\r\nimport \"./Chat.css\";\r\nimport sendLogo from \"../../images/send.png\";\r\nimport Message from \"../Message/Message\";\r\nimport ReactScrollToBottom from \"react-scroll-to-bottom\";\r\nimport closeIcon from \"../../images/closeIcon.png\";\r\n\r\nlet socket;\r\n\r\nconst ENDPOINT = \"http://localhost:5000/\";\r\n\r\nconst Chat = () => {\r\n    const [id, setid] = useState(\"\");\r\n    const [messages, setMessages] = useState([])\r\n\r\n    const send = () => {\r\n        const message = document.getElementById('chatInput').value;\r\n        socket.emit('message', { message, id });\r\n        document.getElementById('chatInput').value = \"\";\r\n    }\r\n\r\n    console.log(messages);\r\n    useEffect(() => {\r\n        socket = socketIo(ENDPOINT, { transports: ['websocket'] });\r\n\r\n        socket.on('connect', () => {\r\n            alert('Connected');\r\n            setid(socket.id);\r\n\r\n        })\r\n        console.log(socket);\r\n        socket.emit('joined', { user })\r\n\r\n        socket.on('welcome', (data) => {\r\n            setMessages([...messages, data]);\r\n            console.log(data.user, data.message);\r\n        })\r\n\r\n        socket.on('userJoined', (data) => {\r\n            setMessages([...messages, data]);\r\n            console.log(data.user, data.message);\r\n        })\r\n\r\n        socket.on('leave', (data) => {\r\n            setMessages([...messages, data]);\r\n            console.log(data.user, data.message)\r\n        })\r\n\r\n        return () => {\r\n            socket.emit('disconnect');\r\n            socket.off();\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        socket.on('sendMessage', (data) => {\r\n            setMessages([...messages, data]);\r\n            console.log(data.user, data.message, data.id);\r\n        })\r\n        return () => {\r\n            socket.off();\r\n        }\r\n    }, [messages])\r\n\r\n    return (\r\n        <div className=\"chatPage\">\r\n            <div className=\"chatContainer\">\r\n                <div className=\"header\">\r\n                    <h2>C CHAT</h2>\r\n                    <a href=\"/\"> <img src={closeIcon} alt=\"Close\" /></a>\r\n                </div>\r\n                <ReactScrollToBottom className=\"chatBox\">\r\n                    {messages.map((item, i) => <Message user={item.id === id ? '' : item.user} message={item.message} classs={item.id === id ? 'right' : 'left'} />)}\r\n                </ReactScrollToBottom>\r\n                <div className=\"inputBox\">\r\n                    <input onKeyPress={(event) => event.key === 'Enter' ? send() : null} type=\"text\" id=\"chatInput\" />\r\n                    <button onClick={send} className=\"sendBtn\"><img src={sendLogo} alt=\"Send\" /></button>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chat\r\n"],"mappings":"kQAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,IAAI,KAAQ,cAAc,CACnC,MAAOC,SAAQ,KAAM,kBAAkB,CACvC,MAAO,YAAY,CACnB,MAAOC,SAAQ,KAAM,uBAAuB,CAC5C,MAAOC,QAAO,KAAM,oBAAoB,CACxC,MAAOC,oBAAmB,KAAM,wBAAwB,CACxD,MAAOC,UAAS,KAAM,4BAA4B,CAAC,wFAEnD,GAAIC,OAAM,CAEV,GAAMC,SAAQ,CAAG,wBAAwB,CAEzC,GAAMC,KAAI,CAAG,QAAPA,KAAI,EAAS,CACf,cAAoBT,QAAQ,CAAC,EAAE,CAAC,wCAAzBU,EAAE,eAAEC,KAAK,eAChB,eAAgCX,QAAQ,CAAC,EAAE,CAAC,yCAArCY,QAAQ,eAAEC,WAAW,eAE5B,GAAMC,KAAI,CAAG,QAAPA,KAAI,EAAS,CACf,GAAMC,QAAO,CAAGC,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC,CAACC,KAAK,CAC1DX,MAAM,CAACY,IAAI,CAAC,SAAS,CAAE,CAAEJ,OAAO,CAAPA,OAAO,CAAEL,EAAE,CAAFA,EAAG,CAAC,CAAC,CACvCM,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC,CAACC,KAAK,CAAG,EAAE,CACnD,CAAC,CAEDE,OAAO,CAACC,GAAG,CAACT,QAAQ,CAAC,CACrBb,SAAS,CAAC,UAAM,CACZQ,MAAM,CAAGL,QAAQ,CAACM,QAAQ,CAAE,CAAEc,UAAU,CAAE,CAAC,WAAW,CAAE,CAAC,CAAC,CAE1Df,MAAM,CAACgB,EAAE,CAAC,SAAS,CAAE,UAAM,CACvBC,KAAK,CAAC,WAAW,CAAC,CAClBb,KAAK,CAACJ,MAAM,CAACG,EAAE,CAAC,CAEpB,CAAC,CAAC,CACFU,OAAO,CAACC,GAAG,CAACd,MAAM,CAAC,CACnBA,MAAM,CAACY,IAAI,CAAC,QAAQ,CAAE,CAAElB,IAAI,CAAJA,IAAK,CAAC,CAAC,CAE/BM,MAAM,CAACgB,EAAE,CAAC,SAAS,CAAE,SAACE,IAAI,CAAK,CAC3BZ,WAAW,8BAAKD,QAAQ,GAAEa,IAAI,GAAE,CAChCL,OAAO,CAACC,GAAG,CAACI,IAAI,CAACxB,IAAI,CAAEwB,IAAI,CAACV,OAAO,CAAC,CACxC,CAAC,CAAC,CAEFR,MAAM,CAACgB,EAAE,CAAC,YAAY,CAAE,SAACE,IAAI,CAAK,CAC9BZ,WAAW,8BAAKD,QAAQ,GAAEa,IAAI,GAAE,CAChCL,OAAO,CAACC,GAAG,CAACI,IAAI,CAACxB,IAAI,CAAEwB,IAAI,CAACV,OAAO,CAAC,CACxC,CAAC,CAAC,CAEFR,MAAM,CAACgB,EAAE,CAAC,OAAO,CAAE,SAACE,IAAI,CAAK,CACzBZ,WAAW,8BAAKD,QAAQ,GAAEa,IAAI,GAAE,CAChCL,OAAO,CAACC,GAAG,CAACI,IAAI,CAACxB,IAAI,CAAEwB,IAAI,CAACV,OAAO,CAAC,CACxC,CAAC,CAAC,CAEF,MAAO,WAAM,CACTR,MAAM,CAACY,IAAI,CAAC,YAAY,CAAC,CACzBZ,MAAM,CAACmB,GAAG,EAAE,CAChB,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN3B,SAAS,CAAC,UAAM,CACZQ,MAAM,CAACgB,EAAE,CAAC,aAAa,CAAE,SAACE,IAAI,CAAK,CAC/BZ,WAAW,8BAAKD,QAAQ,GAAEa,IAAI,GAAE,CAChCL,OAAO,CAACC,GAAG,CAACI,IAAI,CAACxB,IAAI,CAAEwB,IAAI,CAACV,OAAO,CAAEU,IAAI,CAACf,EAAE,CAAC,CACjD,CAAC,CAAC,CACF,MAAO,WAAM,CACTH,MAAM,CAACmB,GAAG,EAAE,CAChB,CAAC,CACL,CAAC,CAAE,CAACd,QAAQ,CAAC,CAAC,CAEd,mBACI,YAAK,SAAS,CAAC,UAAU,uBACrB,aAAK,SAAS,CAAC,eAAe,wBAC1B,aAAK,SAAS,CAAC,QAAQ,wBACnB,oBAAI,QAAM,EAAK,cACf,WAAG,IAAI,CAAC,GAAG,WAAC,GAAC,0BAAK,GAAG,CAAEN,SAAU,CAAC,GAAG,CAAC,OAAO,EAAG,GAAI,GAClD,cACN,KAAC,mBAAmB,EAAC,SAAS,CAAC,SAAS,UACnCM,QAAQ,CAACe,GAAG,CAAC,SAACC,IAAI,CAAEC,CAAC,qBAAK,KAAC,OAAO,EAAC,IAAI,CAAED,IAAI,CAAClB,EAAE,GAAKA,EAAE,CAAG,EAAE,CAAGkB,IAAI,CAAC3B,IAAK,CAAC,OAAO,CAAE2B,IAAI,CAACb,OAAQ,CAAC,MAAM,CAAEa,IAAI,CAAClB,EAAE,GAAKA,EAAE,CAAG,OAAO,CAAG,MAAO,EAAG,GAAC,EAC9H,cACtB,aAAK,SAAS,CAAC,UAAU,wBACrB,cAAO,UAAU,CAAE,oBAACoB,KAAK,QAAKA,MAAK,CAACC,GAAG,GAAK,OAAO,CAAGjB,IAAI,EAAE,CAAG,IAAI,EAAC,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,EAAG,cAClG,eAAQ,OAAO,CAAEA,IAAK,CAAC,SAAS,CAAC,SAAS,uBAAC,YAAK,GAAG,CAAEX,QAAS,CAAC,GAAG,CAAC,MAAM,EAAG,EAAS,GACnF,GACJ,EAEJ,CAEd,CAAC,CAED,cAAeM,KAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}